# Ruby ― インストール編

## Ruby について

Ruby には優秀な[リファレンスマニュアル](https://docs.ruby-lang.org/ja/latest/doc/index.html)が存在するので、これを読めば Ruby を使いこなすことができます。

しかし、これは量が大変多い上に、ある程度プログラミングができる人を対象に書かれているので、初学者には不親切かもしれません。
この文章の基本編には、初学者を対象として必要最小限の使い方を書いておきます。 

特に、東大では前期教養で開講される『情報科学』で利用される言語であるため、受講生の中には最低限使える方も多いと思います。
そのような方はいきなりリファレンスマニュアルを読んで更なるスキルを目指すのも良いですし、発展編やその他の教程、もしくは別の言語に挑戦するのも良いでしょう。

## インストール

Ubuntu などの Debian 系の OS を扱う場合、Ruby のインストールは簡単にできます。
端末 (ターミナル) を開いて、以下のコマンドを実行するだけです。

```
$ sudo apt-get install ruby
```

この方法ですと、apt-get に導入されているもののうち最新版の Ruby が入ります。

インストールし終わったら、ターミナルで次のコマンドを打ってみましょう。

```
$ ruby -v
```

インストールに成功していれば、例えば次のように出てくると思います。 

```
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]
```

大事なのは `ruby` の後に出てくる数字です。
これはバージョンを表しています。
2018 年 4 月現在、バージョン 2.1 以前のサポートはすでに終了しており、バージョン 2.2 もサポートが終了しようとしています。
そのため、バージョンが 2.3 以上あることを確認してください。
実習資料集のソースコードの中にはバージョン 2.1 以上を前提としているものがあります。

これで準備は完了です。次のステップで実際に使ってみましょう。

## 実行

### irb

前のステップで irb と ruby という 2 つのプログラムがインストールされているはずです。
これらはどちらも Ruby の処理系ですが、irb は対話型と呼ばれる処理系になっています。
対話型とは、プログラムを一通り書いた後にそれを実行するのではなく、命令を一つ一つその場で実行させ、その結果を見ながらまた次の命令を実行させるという形式の処理系です。
気軽にコードを実行したいときに便利です。

まず、irb の使い方から見てみましょう。次のコマンドを入力してみてください。

```
$ irb
```

すると、次のような文字列が表示されて、その右にカーソルが合うと思います。

```
irb(main):001:0>
```

これが出てきたら、`>` の後に続けて次のように打ち込んでみましょう。

```ruby
print "Hello, world." 
```

すると、端末は次のようになるはずです。

```
irb(main):001:0> print "Hello, world."
Hello, world.
=> nil
irb(main):002:0>
```

この 2 行目が命令に対する出力にあたります。
irb の環境から出たいときは Ctrl + D (または環境によっては Ctrl + C) を入力しましょう。

### ruby

次に、ruby の使い方です。
こちらはまず、ソースファイルを作成する必要があります。

適当なテキストエディタで「helloworld.rb」というファイルを作成して、次の文字列を打ち込んで保存しましょう。

```ruby
puts "Hello, world."
```

そして、そのまま同じフォルダ内で次のコマンドを実行してみてください。

```
$ ruby helloworld.rb
```

すると、次のような出力がされると思います。

```
Hello, world.
```

## Ruby Gems

Ruby には Ruby Gems という便利なライブラリ集があり、熱狂的な Ruby ファンたちが日夜新たな Ruby ライブラリをアップロードしています。
gem 本体をインストールしておくと、gem を使ってライブラリをとても簡単にインストールすることができます。

非常に便利なので、gem 本体をインストールしておきましょう (この実習資料では天気予報編でのみ使用します)。
gem をインストールするには、端末に次のコマンドを入力すれば OK です。

```
$ sudo apt-get install gem
```

Ruby Gems には例えば次のようなパッケージがあります。
これらを用いて何かをしたいけどきっかけがないという皆さんは、ぜひとも『計算数学 II』を履修してください。
お待ちしております。

<dl>
<dt style="font-style: normal;">Ruby on Rails</dt>
<dd>
Web アプリケーション開発のための有名なパッケージです。Web アプリケーションの開発をより短いコードで簡単にできるように工夫が凝らされています。
</dd>
<dt style="font-style: normal;">Twitter</dt>
<dd>
Ruby で Twitter クライアントを作るパッケージです。Twitter の API には OAuth 認証を突破しなければならず、プログラミング初心者〜中級者には良い経験になると思います (大したことはありません)。
</dd>
<dt style="font-style: normal;">pry</dt>
<dd>
irb の豪華版です。数値やクラスの色分けだけでなく Tab 補完までできてしまうスグレモノです。
</dd>
</dl>

gem 関係で何か問題があった場合は、[トラブルシューティング](trouble.md)に解決法が載っているかもしれません。